# Telegram Gateway API - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –¥–ª—è Symbian Client

## ‚ö†Ô∏è –í–ê–ñ–õ–ò–í–ê –Ü–ù–§–û–†–ú–ê–¶–Ü–Ø –ü–†–û –ê–†–•–Ü–¢–ï–ö–¢–£–†–£

**Stateless API** - –°–µ—Ä–≤–µ—Ä –ù–ï –∑–±–µ—Ä—ñ–≥–∞—î —Å–µ—Å—ñ—ó!

–¶–µ –æ–∑–Ω–∞—á–∞—î:
- ‚úÖ –ü—ñ—Å–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –æ—Ç—Ä–∏–º—É—î—Ç–µ `phone` —Ç–∞ `session_data`
- ‚úÖ –î–õ–Ø –ö–û–ñ–ù–û–ì–û API –∑–∞–ø–∏—Ç—É –ø–µ—Ä–µ–¥–∞—î—Ç–µ –æ–±–∏–¥–≤–∞ –∑–Ω–∞—á–µ–Ω–Ω—è –≤ headers:
  - `X-Phone: +380XXXXXXXXX`
  - `X-Session-Data: base64_encoded_data`
- ‚úÖ –°–µ—Ä–≤–µ—Ä –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç–∏ - —Å–µ—Å—ñ—ó –Ω–µ –≤—Ç—Ä–∞—á–∞—é—Ç—å—Å—è
- ‚ö†Ô∏è –ö–æ–∂–µ–Ω –∑–∞–ø–∏—Ç —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏–π Telegram –∫–ª—ñ—î–Ω—Ç (–∑–∞–π–º–∞—î 2-5 —Å–µ–∫—É–Ω–¥)
- ‚ö†Ô∏è `session_data` –º–æ–∂–µ –±—É—Ç–∏ –≤–µ–ª–∏–∫–∏–º (–∫—ñ–ª—å–∫–∞ KB)

---

## –ë–∞–∑–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

**Base URL:** `http://localhost:8080`

**Content-Type:** `application/json`

**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –¥–ª—è API –∑–∞–ø–∏—Ç—ñ–≤:**
- Header `X-Phone: +380XXXXXXXXX`
- Header `X-Session-Data: base64_encoded_telegram_session`

---

## 1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è

### 1.1 –ó–∞–ø–∏—Ç –∫–æ–¥—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

**Endpoint:** `POST /auth/request-code`

**Request Body:**
```json
{
  "phone": "+380501234567"
}
```

**Response (200 OK):**
```json
{
  "status": "code_sent",
  "message": "–ö–æ–¥ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Telegram"
}
```

**–©–æ —Ä–æ–±–∏—Ç–∏:**
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É
2. –í—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç–µ –∑–∞–ø–∏—Ç
3. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ—Ç—Ä–∏–º—É—î –∫–æ–¥ –≤ Telegram
4. –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –¥–æ login

---

### 1.2 –í—Ö—ñ–¥ –∑ –∫–æ–¥–æ–º

**Endpoint:** `POST /auth/login`

**Request Body:**
```json
{
  "phone": "+380501234567",
  "code": "12345"
}
```

**Response (200 OK) - –£—Å–ø—ñ—à–Ω–∏–π –≤—Ö—ñ–¥:**
```json
{
  "status": "success",
  "phone": "+380501234567",
  "session_data": "eyJkY19pZCI6Miwic2Vzc2lvbl9rZXkiOi4uLn0="
}
```

**Response (200 OK) - –ü–æ—Ç—Ä—ñ–±–µ–Ω 2FA –ø–∞—Ä–æ–ª—å:**
```json
{
  "status": "password_required",
  "message": "–û–±–ª—ñ–∫–æ–≤–∏–π –∑–∞–ø–∏—Å –∑–∞—Ö–∏—â–µ–Ω–æ 2FA –ø–∞—Ä–æ–ª–µ–º",
  "needs_password": true
}
```

**Response (401 Unauthorized):**
```json
{
  "error": "Invalid code or no pending auth"
}
```

**–©–æ —Ä–æ–±–∏—Ç–∏:**
1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–æ–ª–µ `needs_password` —É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
2. –Ø–∫—â–æ `false` - –∑–±–µ—Ä–µ–≥—Ç–∏ `phone` —Ç–∞ `session_data` –≤ RMS
3. –Ø–∫—â–æ `true` - –ø–æ–∫–∞–∑–∞—Ç–∏ —Ñ–æ—Ä–º—É –≤–≤–µ–¥–µ–Ω–Ω—è 2FA –ø–∞—Ä–æ–ª—è

---

### 1.3 –í—Ö—ñ–¥ –∑ 2FA –ø–∞—Ä–æ–ª–µ–º

**Endpoint:** `POST /auth/password`

**Request Body:**
```json
{
  "phone": "+380501234567",
  "password": "my_2fa_password"
}
```

**Response (200 OK):**
```json
{
  "status": "success",
  "phone": "+380501234567",
  "session_data": "eyJkY19pZCI6Miwic2Vzc2lvbl9rZXkiOi4uLn0="
}
```

**Response (401 Unauthorized):**
```json
{
  "error": "No pending password request"
}
```

**–©–æ —Ä–æ–±–∏—Ç–∏:**
1. –ó–±–µ—Ä–µ–≥—Ç–∏ `phone` —Ç–∞ `session_data` –≤ RMS
2. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ü—ñ –¥–∞–Ω—ñ –¥–ª—è –≤—Å—ñ—Ö –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤

---

## 2. –†–æ–±–æ—Ç–∞ –∑ —á–∞—Ç–∞–º–∏

### 2.1 –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É —á–∞—Ç—ñ–≤

**Endpoint:** `GET /api/chats`

**Headers:**
```
X-Phone: +380501234567
X-Session-Data: eyJkY19pZCI6Miwic2Vzc2lvbl9rZXkiOi4uLn0=
```

**Response (200 OK):**
```json
{
  "chats": [
    {
      "id": 123456789,
      "name": "John Doe",
      "last_message": "See you tomorrow!",
      "unread_count": 3,
      "last_update_time": "2025-10-06T14:30:00Z",
      "type": "user"
    },
    {
      "id": 987654321,
      "name": "Family Group",
      "last_message": "üëç",
      "unread_count": 0,
      "last_update_time": "2025-10-06T12:15:00Z",
      "type": "chat"
    }
  ],
  "count": 2
}
```

**Response (401 Unauthorized):**
```json
{
  "error": "Missing authentication headers"
}
```
–∞–±–æ
```json
{
  "error": "Invalid session data"
}
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:**
- –û–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –ø—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ –¥–æ–¥–∞—Ç–∫—É
- –ö–µ—à—É–≤–∞—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ
- –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ `unread_count` —è–∫ –±–µ–π–¥–∂
- **–í–ê–ñ–õ–ò–í–û**: –ó–∞–ø–∏—Ç –º–æ–∂–µ –∑–∞–π–º–∞—Ç–∏ 2-5 —Å–µ–∫—É–Ω–¥

---

### 2.2 –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —á–∞—Ç—É

**Endpoint:** `GET /api/messages/:chat_id`

**Query Parameters:**
- `limit` (optional) - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (default: 50)

**Example:** `GET /api/messages/123456789?limit=20`

**Headers:**
```
X-Phone: +380501234567
X-Session-Data: eyJkY19pZCI6Miwic2Vzc2lvbl9rZXkiOi4uLn0=
```

**Response (200 OK):**
```json
{
  "messages": [
    {
      "id": 1001,
      "chat_id": "123456789",
      "text": "Hello from Symbian!",
      "sender": "You",
      "timestamp": "2025-10-06T14:25:00Z",
      "is_read": true,
      "out": true
    },
    {
      "id": 1000,
      "chat_id": "123456789",
      "text": "Hi! How are you?",
      "sender": "@johndoe",
      "timestamp": "2025-10-06T14:20:00Z",
      "is_read": true,
      "out": false
    }
  ],
  "chat_id": "123456789"
}
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:**
- –ó–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ –ø–æ 20-30 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –∑–∞ —Ä–∞–∑ (limit=20)
- –ö–µ—à—É–≤–∞—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–æ
- –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ "–¥–æ–≥—Ä—É–∑–∫—É" —Å—Ç–∞—Ä–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- **–í–ê–ñ–õ–ò–í–û**: –ó–∞–ø–∏—Ç –º–æ–∂–µ –∑–∞–π–º–∞—Ç–∏ 2-5 —Å–µ–∫—É–Ω–¥

---

### 2.3 –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

**Endpoint:** `POST /api/send`

**Headers:**
```
X-Phone: +380501234567
X-Session-Data: eyJkY19pZCI6Miwic2Vzc2lvbl9rZXkiOi4uLn0=
Content-Type: application/json
```

**Request Body:**
```json
{
  "chat_id": "123456789",
  "text": "Hello from Nokia!"
}
```

**Response (200 OK):**
```json
{
  "status": "sent",
  "message_id": 1002,
  "timestamp": "2025-10-06T14:30:00Z"
}
```

**Response (400 Bad Request):**
```json
{
  "error": "Invalid chat_id"
}
```

---

### 2.4 –ü–æ–∑–Ω–∞—á–∏—Ç–∏ —è–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–µ

**Endpoint:** `POST /api/mark-read`

**Headers:**
```
X-Phone: +380501234567
X-Session-Data: eyJkY19pZCI6Miwic2Vzc2lvbl9rZXkiOi4uLn0=
Content-Type: application/json
```

**Request Body:**
```json
{
  "chat_id": "123456789",
  "message_ids": [1000, 1001, 1002]
}
```

**Response (200 OK):**
```json
{
  "status": "marked_read"
}
```

---

## 3. –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

‚ö†Ô∏è **Long Polling –≤–∏–¥–∞–ª–µ–Ω–æ** - endpoint `/api/poll` –±—ñ–ª—å—à–µ –Ω–µ —ñ—Å–Ω—É—î

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏:**
1. **–ü–µ—Ä—ñ–æ–¥–∏—á–Ω–µ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è** - –∑–∞–ø–∏—Ç—É–≤–∞—Ç–∏ –Ω–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ–∂–Ω—ñ 10-30 —Å–µ–∫—É–Ω–¥
2. **–û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ —á–∞—Ç—É** - –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ –Ω–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥—ñ –¥–æ —á–∞—Ç—É
3. **Manual refresh** - –∫–Ω–æ–ø–∫–∞ "–û–Ω–æ–≤–∏—Ç–∏" –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

**–ü—Ä–∏–∫–ª–∞–¥ –ø–µ—Ä—ñ–æ–¥–∏—á–Ω–æ–≥–æ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è:**
```java
class RefreshThread extends Thread {
    private boolean running = true;
    private String phone;
    private String sessionData;

    public void run() {
        while(running) {
            try {
                // –û–Ω–æ–≤–∏—Ç–∏ —Å–ø–∏—Å–æ–∫ —á–∞—Ç—ñ–≤
                Chat[] chats = telegramClient.getChats();
                updateUI(chats);

                // –ß–µ–∫–∞—Ç–∏ 30 —Å–µ–∫—É–Ω–¥
                Thread.sleep(30000);

            } catch (Exception e) {
                // –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–∫–∏
            }
        }
    }
}
```

---

## 4. –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –≤ RMS

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è (Java ME):

```java
// –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø—ñ—Å–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
private void saveSessionData(String phone, String sessionData) {
    try {
        RecordStore rs = RecordStore.openRecordStore("TelegramAuth", true);

        // –§–æ—Ä–º–∞—Ç: phone|sessionData
        String combined = phone + "|" + sessionData;
        byte[] data = combined.getBytes();

        if (rs.getNumRecords() == 0) {
            rs.addRecord(data, 0, data.length);
        } else {
            rs.setRecord(1, data, 0, data.length);
        }

        rs.closeRecordStore();
    } catch (RecordStoreException e) {
        // –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–∫–∏
    }
}

// –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É
private String[] loadSessionData() {
    try {
        RecordStore rs = RecordStore.openRecordStore("TelegramAuth", false);
        if (rs.getNumRecords() > 0) {
            byte[] data = rs.getRecord(1);
            rs.closeRecordStore();
            String combined = new String(data);

            // –†–æ–∑–¥—ñ–ª—è—î–º–æ: [0]=phone, [1]=sessionData
            int pipeIndex = combined.indexOf('|');
            if (pipeIndex > 0) {
                String[] parts = new String[2];
                parts[0] = combined.substring(0, pipeIndex);
                parts[1] = combined.substring(pipeIndex + 1);
                return parts;
            }
        }
        rs.closeRecordStore();
    } catch (RecordStoreException e) {
        // –î–∞–Ω—ñ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ
    }
    return null;
}
```

---

## 5. –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

### –ö–æ–¥–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π:

| –ö–æ–¥ | –ó–Ω–∞—á–µ–Ω–Ω—è | –î—ñ—è |
|-----|----------|-----|
| 200 | OK | –£—Å–ø—ñ—à–Ω–æ |
| 400 | Bad Request | –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø–∏—Ç—É |
| 401 | Unauthorized | –ü–æ—Ç—Ä—ñ–±–Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è |
| 500 | Server Error | –ü–æ–≤—Ç–æ—Ä–∏—Ç–∏ —á–µ—Ä–µ–∑ 10 —Å–µ–∫ |

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:

1. **–í—Ç—Ä–∞—Ç–∞ –∑'—î–¥–Ω–∞–Ω–Ω—è:**
   - –ß–µ–∫–∞—Ç–∏ 5 —Å–µ–∫—É–Ω–¥
   - –ü–æ–≤—Ç–æ—Ä–∏—Ç–∏ –∑–∞–ø–∏—Ç
   - –ü—ñ—Å–ª—è 3 –Ω–µ–≤–¥–∞—á - –ø–æ–∫–∞–∑–∞—Ç–∏ –ø–æ–º–∏–ª–∫—É

2. **401 Unauthorized:**
   - –í–∏–¥–∞–ª–∏—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –¥–∞–Ω—ñ (phone, session_data)
   - –ü–æ–∫–∞–∑–∞—Ç–∏ –µ–∫—Ä–∞–Ω –≤—Ö–æ–¥—É

3. **–ü–æ–≤—ñ–ª—å–Ω—ñ –∑–∞–ø–∏—Ç–∏:**
   - –ö–æ–∂–µ–Ω –∑–∞–ø–∏—Ç –º–æ–∂–µ –∑–∞–π–º–∞—Ç–∏ 2-5 —Å–µ–∫—É–Ω–¥
   - –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
   - –ù–µ –±–ª–æ–∫—É–≤–∞—Ç–∏ UI

---

## 6. –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –¥–ª—è Symbian

### 6.1 –ï–∫–æ–Ω–æ–º—ñ—è —Ç—Ä–∞—Ñ—ñ–∫—É
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `limit=20` –¥–ª—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- –ö–µ—à—É–π—Ç–µ –≤—Å–µ –ª–æ–∫–∞–ª—å–Ω–æ (RMS)
- –ù–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–π—Ç–µ —Å—Ç–∞—Ä—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –±–µ–∑ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ
- ‚ö†Ô∏è **session_data –º–æ–∂–µ –±—É—Ç–∏ 2-4 KB** - –≤—Ä–∞—Ö–æ–≤—É–π—Ç–µ —Ü–µ –ø—Ä–∏ —á–∞—Å—Ç–∏—Ö –∑–∞–ø–∏—Ç–∞—Ö

### 6.2 –ï–∫–æ–Ω–æ–º—ñ—è –±–∞—Ç–∞—Ä–µ—ó
- –ü–µ—Ä—ñ–æ–¥–∏—á–Ω–µ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è –∑–∞–º—ñ—Å—Ç—å long polling
- –ú–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ "–¢–∏—Ö–∏–π —Ä–µ–∂–∏–º" (23:00 - 07:00)
- –î–æ–∑–≤–æ–ª–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —ñ–Ω—Ç–µ—Ä–≤–∞–ª –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

### 6.3 –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–∞–º'—è—Ç—Ç—é
- –ó–±–µ—Ä—ñ–≥–∞–π—Ç–µ —Ç—ñ–ª—å–∫–∏ –æ—Å—Ç–∞–Ω–Ω—ñ 50 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –∫–æ–∂–Ω–æ–≥–æ —á–∞—Ç—É
- –û—á–∏—â–∞–π—Ç–µ —Å—Ç–∞—Ä—ñ –¥–∞–Ω—ñ –ø—Ä–∏ –Ω–µ—Å—Ç–∞—á—ñ –ø–∞–º'—è—Ç—ñ
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ RecordStore –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ

### 6.4 UI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó
- –ü–æ–∫–∞–∑—É–π—Ç–µ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (2-5 —Å–µ–∫ –Ω–∞ –∑–∞–ø–∏—Ç!)
- –ö–µ—à—É–π—Ç–µ UI –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è
- –ú—ñ–Ω—ñ–º–∞–ª—ñ—Å—Ç–∏—á–Ω–∏–π –¥–∏–∑–∞–π–Ω
- –î–æ–¥–∞–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä –¥–ª—è –¥–æ–≤–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π

---

## 7. –ü—Ä–∏–∫–ª–∞–¥ –ø–æ–≤–Ω–æ–≥–æ —Ü–∏–∫–ª—É —Ä–æ–±–æ—Ç–∏

1. **–ó–∞–ø—É—Å–∫ –¥–æ–¥–∞—Ç–∫—É:**
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å `phone` —Ç–∞ `session_data` –≤ RMS
   - –Ø–∫—â–æ —î ‚Üí –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —ñ –ø–µ—Ä–µ–π—Ç–∏ –¥–æ —Å–ø–∏—Å–∫—É —á–∞—Ç—ñ–≤
   - –Ø–∫—â–æ –Ω–µ–º–∞—î ‚Üí –ø–æ–∫–∞–∑–∞—Ç–∏ –µ–∫—Ä–∞–Ω –≤—Ö–æ–¥—É

2. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è:**
   - –í–≤–µ—Å—Ç–∏ –Ω–æ–º–µ—Ä ‚Üí `POST /auth/request-code`
   - –í–≤–µ—Å—Ç–∏ –∫–æ–¥ ‚Üí `POST /auth/login`
   - –Ø–∫—â–æ `needs_password: true` ‚Üí `POST /auth/password`
   - –ó–±–µ—Ä–µ–≥—Ç–∏ phone + session_data ‚Üí –≤—ñ–¥–∫—Ä–∏—Ç–∏ —á–∞—Ç–∏

3. **–†–æ–±–æ—Ç–∞ –∑ —á–∞—Ç–∞–º–∏:**
   - –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —á–∞—Ç–∏ ‚Üí `GET /api/chats` (–∑ headers)
   - –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –ø–µ—Ä—ñ–æ–¥–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —É —Ñ–æ–Ω–æ–≤–æ–º—É –ø–æ—Ç–æ—Ü—ñ
   - –ü—Ä–∏ –≤–∏–±–æ—Ä—ñ —á–∞—Ç—É ‚Üí `GET /api/messages/:id` (–∑ headers)

4. **–í—ñ–¥–ø—Ä–∞–≤–∫–∞:**
   - –ù–∞–ø–∏—Å–∞—Ç–∏ —Ç–µ–∫—Å—Ç
   - `POST /api/send` (–∑ headers)
   - –î–æ–¥–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ –ª–æ–∫–∞–ª—å–Ω–∏–π –∫–µ—à

5. **–û–Ω–æ–≤–ª–µ–Ω–Ω—è:**
   - –ü–µ—Ä—ñ–æ–¥–∏—á–Ω–µ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è –∫–æ–∂–Ω—ñ 30 —Å–µ–∫—É–Ω–¥
   - –ê–±–æ manual refresh –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –∫–Ω–æ–ø–∫–∏

---

## 8. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### cURL –ø—Ä–∏–∫–ª–∞–¥–∏:

```bash
# –ó–∞–ø–∏—Ç –∫–æ–¥—É
curl -X POST http://localhost:8080/auth/request-code \
  -H "Content-Type: application/json" \
  -d '{"phone": "+380501234567"}'

# –õ–æ–≥—ñ–Ω
curl -X POST http://localhost:8080/auth/login \
  -H "Content-Type: application/json" \
  -d '{"phone": "+380501234567", "code": "12345"}'

# –û—Ç—Ä–∏–º–∞—Ç–∏ —á–∞—Ç–∏ (–∑–∞–º—ñ–Ω—ñ—Ç—å session_data –Ω–∞ —Ä–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ)
curl http://localhost:8080/api/chats \
  -H "X-Phone: +380501234567" \
  -H "X-Session-Data: eyJkY19pZCI6Miwic2Vzc2lvbl9rZXkiOi4uLn0="

# –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
curl -X POST http://localhost:8080/api/send \
  -H "X-Phone: +380501234567" \
  -H "X-Session-Data: eyJkY19pZCI6Miwic2Vzc2lvbl9rZXkiOi4uLn0=" \
  -H "Content-Type: application/json" \
  -d '{"chat_id": "123456789", "text": "Hello!"}'
```

---

## 9. –ß–∞—Å—Ç—ñ –ø–∏—Ç–∞–Ω–Ω—è (FAQ)

**Q: –ß–æ–º—É –∫–æ–∂–µ–Ω –∑–∞–ø–∏—Ç –∑–∞–π–º–∞—î 2-5 —Å–µ–∫—É–Ω–¥?**
A: –°–µ—Ä–≤–µ—Ä —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏–π Telegram –∫–ª—ñ—î–Ω—Ç –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É. –¶–µ trade-off –º—ñ–∂ –ø—Ä–æ—Å—Ç–æ—Ç–æ—é (stateless) —ñ —à–≤–∏–¥–∫—ñ—Å—Ç—é.

**Q: –ß–∏ –º–æ–∂–Ω–∞ –∫–µ—à—É–≤–∞—Ç–∏ session_data?**
A: –¢–∞–∫, session_data –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –¥–ª—è –≤—Å—ñ—Ö –∑–∞–ø–∏—Ç—ñ–≤.

**Q: –©–æ —Ä–æ–±–∏—Ç–∏ —è–∫—â–æ —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–≤—Å—è?**
A: –ù—ñ—á–æ–≥–æ! –í–∞—à—ñ –¥–∞–Ω—ñ (phone + session_data) –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –¥—ñ–π—Å–Ω–∏–º–∏. –ü—Ä–æ—Å—Ç–æ –ø—Ä–æ–¥–æ–≤–∂—É–π—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ó—Ö.

**Q: –Ø–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –Ω–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è?**
A: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ñ–æ–Ω–æ–≤–∏–π –ø–æ—Ç—ñ–∫ –∑ –ø–µ—Ä—ñ–æ–¥–∏—á–Ω–∏–º –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è–º (–∫–æ–∂–Ω—ñ 30 —Å–µ–∫). –ü—Ä–∏ –Ω–æ–≤–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è—Ö –ø–æ–∫–∞–∑—É–π—Ç–µ alert.

---

## –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–î–µ—Ç–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:
- **API.md** - –ø–æ–≤–Ω–∏–π –æ–ø–∏—Å API endpoints
- **CLIENT_GUIDE.md** - –≥—ñ–¥ –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤ –∑ –ø—Ä–∏–∫–ª–∞–¥–∞–º–∏ –∫–æ–¥—É

Telegram API –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞:
- **gotd/td** - https://github.com/gotd/td

---

**–£—Å–ø—ñ—Ö—ñ–≤ –∑ —Ä–æ–∑—Ä–æ–±–∫–æ—é –∫–ª—ñ—î–Ω—Ç–∞ –¥–ª—è Symbian! üöÄüì±**
